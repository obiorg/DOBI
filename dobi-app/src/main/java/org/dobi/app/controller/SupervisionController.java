package org.dobi.app.controller; import org.dobi.app.dto.MachineStatusDto; import org.dobi.app.service.SupervisionService; import org.springframework.http.ResponseEntity; import org.springframework.web.bind.annotation.*; import java.util.List; import java.util.Map; @RestController @RequestMapping("/api/v1") public class SupervisionController { private final SupervisionService supervisionService; public SupervisionController(SupervisionService supervisionService) { this.supervisionService = supervisionService; } @GetMapping("/status") public Map<String, String> getApiStatus() { return Map.of("status", "OK"); } @GetMapping("/machines") public List<MachineStatusDto> getAllMachineStatuses() { return supervisionService.getAllMachineStatuses(); } @PostMapping("/machines/{id}/restart") public ResponseEntity<Void> restartMachine(@PathVariable Long id) { supervisionService.restartMachineCollector(id); return ResponseEntity.ok().build(); } }
